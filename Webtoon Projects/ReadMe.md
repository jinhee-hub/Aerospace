## 웹툰 프로젝트

# Crawling.py

인터넷에서 웹툰 데이터를 크롤링해오는 코드.  혼자 공부하기 위한 용도로만 사용하였습니다.
크롤링한 이미지는 웹툰 한컷씩 크롤링되지 않고, 여러 컷이 분리되어 합쳐져 하나의 이미지로 만들어져있었다.
이 웹툰 프로젝트는 웹툰의 한컷 한컷의 만화 그림 이미지를 사용해야하기 때문에 바로 사용할 수가 없었다.
따라서 전처리 과정을 통해 한컷 한컷을 분리해내는 과정을 진행하였다.

크롤링 예시

![crawlingImage](https://user-images.githubusercontent.com/54815470/133966483-6217447f-3f18-42e7-9270-dea5ac71a7ef.png)

웹툰을 크롤링하면 여러 컷이 동시에 한 이미지로 묶어서 나온다.


# PreProcess.py

크롤링된 웹툰 데이터를 전처리하여 학습에 사용할 수 있게 한컷한컷 분리하는 과정.
Canny edge detection과 Morphological transformation, HoughLinesP를 사용하여 웹툰 이미지에서 하나의 컷을 분리해내는 코드.

Preprocessing 예시

1. edge detection과 Morphological Transformation으로 하나의 컷이라고 인식되는 영역을 분리한다.

![MorphTFImage](https://user-images.githubusercontent.com/54815470/133968632-1e70963a-b713-487d-bd00-bbd237c53efc.png)


2. 한 컷으로 선택된 영역을 분리해내고, 말풍선과 같이 그림을 그리는 사각형 박스를 넘어간 부분을 잘라낸다.

![CropImage](https://user-images.githubusercontent.com/54815470/133968647-8a6ede78-470b-46e8-8d27-12f17bd71eee.png)


최종적으로 사각형 박스에 잡힌 웹툰 이미지를 Data로 사용한다.

이렇게 크롤링한 데이터를 전처리하는 과정을 거쳤지만 여러가지 문제점이 남아있다.

1. 크롤링과정에서 잘려나간 이미지를 자동으로 합체해주지 못했다.
2. 웹툰 내에 있는 말풍선을 분리해낸 완전한 이미지를 만들 수는 없었다. 따라서, 이미지 내에 텍스트와 말풍선이 그대로 있다.
3. 웹툰 컷을 분리해내는 과정에서 깔끔하게 하나의 컷으로 분리하지 못하고, 말풍선이 튀어나온 배경까지 하나의 컷으로 인식하는 문제점이 일부 있었다.
4. 말풍선에 의해 웹툰의 컷이 이어지거나 깔끔하게 컷 분리가 이루어지지 않는 경우, 여러 개의 컷을 하나의 컷으로 인식하였다. 이 경우, 데이터로 사용할 수 없어서 버려졌다.
5. 여백이 남아있는 컷이 일부 있었다. 여백이 남아있는 컷이 대부분은 아니지만, 무시하기에는 많았기 때문에, 이를 그대로 사용하였다. 다음에는 더 정교한 전처리과정을 통해 발전시킬 예정이다. 


# RandExp.py

전처리 과정을 거친 이미지 중에서 1000개의 데이터만 따로 빼내어 인공지능 학습을 위한 하나의 dataset을 만들었다.
전처리 과정을 거친 후에도 남아있는 불완전한 이미지(말풍선만 있다거나, 아무의미 없는 데이터)는 수작업으로 제거하였다.
보통 데이터 1000개당 10~20개의 불필요한 이미지가 있었고, 많으면 50개 정도의 불필요한 이미지가 있었다.
이러한 데이터는 수작업으로 다른 괜찮은 데이터로 채워넣어서 1000개의 dataset을 .
